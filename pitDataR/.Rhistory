install("pitDataR")
#read in detection data
get_detection_data <- function(detection_data){
setClass('myDate')
setAs("character", "myDate", function(from) as.POSIXct(from, format = "%m-%d-%Y %H:%M:%S"))
alldata <- read.csv(detection_data,
header = TRUE,
colClasses = c("factor", "myDate", "factor", "factor"))
#add date time columns
alldata <- add_datetime_columns(alldata)
return(alldata)
}
#add date columns with lubridate for use in querying by date
add_datetime_columns <- function(detection_dataframe){
require(lubridate)
detection_dataframe$year  <- year(detection_dataframe$detected_at)
detection_dataframe$month <- month(detection_dataframe$detected_at)
detection_dataframe$week  <- week(detection_dataframe$detected_at)
detection_dataframe$day   <- day(detection_dataframe$detected_at)
detection_dataframe$hour  <- hour(detection_dataframe$detected_at)
return(detection_dataframe)
}
#read in all tags
get_all_tags <- function(tags_text_file){
alltags <- read.csv(tags_text_file,
skip = 1,
blank.lines.skip = TRUE,
colClasses = c("NULL", "factor"),
header = FALSE
)
return(alltags)
}
ls()
getwd()
list.files()
alldata <- get_detection_data("BAtags.csv")
alltags <- get_all_tags("pits.csv")
setwd("./pitDataR")
getwd()
pitDataR::get_all_tags("pits.csv")
document()
detected_in_period <- function(data, start_date, end_date, resolution){
require(dplyr)
}
require(lubridate)
getwd()
list.dirs()
list.files()
end_date <- which.min(alldata$detected_at)
end_date
start_date <- which.min(alldata$detected_at)
end_date <- which.max(alldata$detected_at)
print(paste(start_date, end_date))
library(dplyr)
order_by(alldata, detected_at)
alldata %>% order_by(detected_at)
alldata %>% filter(tag %in% alltags$V2)
alldata %>% filter(tag %in% alltags$V2) order_by(detected_at)
detected_in_period <- function(data, start_date, end_date, known_tags = "NULL", resolution = "NULL"){
require(dplyr)
require(lubridate)
#convert character string start and end date to date class
setClass("startDate")
setClass("endDate")
setAs("character", "startDate", function(from) as.POSIXct(from, format = "%m-%d-%Y"))
setAs("character", "endDate", function(from) as.POSIXct(from, format = "%m-%d-%Y"))
selectedData <- filter(data, data$detected_at >= startDate & data$detected_at <= endDate)
}
detected_in_period(alldata, "02-01-2018", "12-31-2018")
detected_in_period <- function(data, start_date, end_date, known_tags = "NULL", resolution = "NULL"){
require(dplyr)
require(lubridate)
#convert character string start and end date to date class
setClass("startDate")
setClass("endDate")
setAs("character", "startDate", function(from) as.POSIXct(from, format = "%m-%d-%Y"))
setAs("character", "endDate", function(from) as.POSIXct(from, format = "%m-%d-%Y"))
start_date <- as.startDate(start_date)
selectedData <- filter(data, data$detected_at >= startDate & data$detected_at <= endDate)
}
detected_in_period(alldata, "02-01-2018", "12-31-2018")
detected_in_period <- function(data, as.Date(start_date, format = "%m-%d-%Y"), end_date, known_tags = "NULL", resolution = "NULL"){
require(dplyr)
require(lubridate)
#convert character string start and end date to date class
setClass("startDate")
setClass("endDate")
setAs("character", "startDate", function(from) as.POSIXct(from, format = "%m-%d-%Y"))
setAs("character", "endDate", function(from) as.POSIXct(from, format = "%m-%d-%Y"))
start_date <- as.startDate(start_date)
selectedData <- filter(data, data$detected_at >= startDate & data$detected_at <= endDate)
}
detected_in_period <- function(data, start_date, end_date, known_tags = "NULL", resolution = "NULL"){
require(dplyr)
require(lubridate)
#convert character string start and end date to date class
start_date <- as.Date(start_date, format = "%m-%d-%Y")
end_date <- as.Date(end_date, format = "%m-%d-%Y")
selectedData <- filter(data, data$detected_at >= startDate & data$detected_at <= endDate)
}
only_Detected <- detected_in_period(alldata, "02-01-2018", "12-31-2018")
detected_in_period <- function(data, start_date, end_date, known_tags = "NULL", resolution = "NULL"){
require(dplyr)
require(lubridate)
#convert character string start and end date to date class
start_date <- as.Date(start_date, format = "%m-%d-%Y")
end_date <- as.Date(end_date, format = "%m-%d-%Y")
selectedData <- filter(data, data$detected_at >= start_date & data$detected_at <= end_date)
}
only_Detected <- detected_in_period(alldata, "02-01-2018", "12-31-2018")
only_Detected <- detected_in_period(alldata, "02-01-2018", "7-31-2018")
only_Detected <- detected_in_period(alldata, "06-01-2018", "7-31-2018")
only_Detected <- detected_in_period(alldata, "07-01-2018", "7-31-2018")
?detected_in_period
?pitDataR::detected_in_period
detected_in_period <- function(data, start_date, end_date, known_tags, resolution = "NULL"){
require(dplyr)
require(lubridate)
#convert character string start and end date to date class
start_date <- as.Date(start_date, format = "%m-%d-%Y")
end_date <- as.Date(end_date, format = "%m-%d-%Y")
#subset data to only specified days
selectedData <- data %>%
filter(detected_at >= start_date & detected_at <= end_date) %>%
filter(tag %in% known_tags)
}
only_Detected <- detected_in_period(alldata, "07-01-2018", "7-31-2018", alltags)
detected_in_period <- function(data, start_date, end_date, known_tags = "NULL", resolution = "NULL"){
require(dplyr)
require(lubridate)
#convert character string start and end date to date class
start_date <- as.Date(start_date, format = "%m-%d-%Y")
end_date <- as.Date(end_date, format = "%m-%d-%Y")
#subset data to only specified days
selectedData <- data %>%
filter(detected_at >= start_date & detected_at <= end_date) #%>%
#filter(tag %in% known_tags)
}
only_Detected <- detected_in_period(alldata, "07-01-2018", "7-31-2018")
str(only_Detected)
str(alltags)
table(only_Detected$tag %in% alltags$V2)
#read in all tags
get_all_tags <- function(tags_text_file){
alltags <- read.csv(tags_text_file,
skip = 1,
blank.lines.skip = TRUE,
colClasses = c("NULL", "factor"),
header = FALSE,
col.names = c("tag")
)
return(alltags)
}
get_all_tags("pits.csv")
#read in all tags
get_all_tags <- function(tags_text_file){
alltags <- read.csv(tags_text_file,
skip = 1,
blank.lines.skip = TRUE,
colClasses = c("NULL", "factor"),
header = FALSE,
col.names = c("","tag")
)
return(alltags)
}
get_all_tags("pits.csv")
detected_in_period <- function(data, start_date, end_date, known_tags, resolution = "NULL"){
require(dplyr)
require(lubridate)
#convert character string start and end date to date class
start_date <- as.Date(start_date, format = "%m-%d-%Y")
end_date <- as.Date(end_date, format = "%m-%d-%Y")
#subset data to only specified days
selectedData <- data %>%
filter(detected_at >= start_date & detected_at <= end_date) %>%
filter(tag %in% known_tags$tag)
}
only_Detected <- detected_in_period(alldata, "07-01-2018", "7-31-2018", alltags)
library(roxygen2)
install("pitDataR")
install.packages("pitDataR")
getwd()
list.dirs()
install.packages("pitDataR")
